<!DOCTYPE html>
<html lang="en-AU" class="scroll-smooth" xmlns:mso="urn:schemas-microsoft-com:office:office" xmlns:msdt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882">
<head>
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-B4V82DTKP6"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-B4V82DTKP6', {
    page_title: 'NSW Burns Community Survey Results',
    custom_map: {
      'custom_parameter_1': 'section_name',
      'custom_parameter_2': 'interaction_type',
      'custom_parameter_3': 'chart_name',
      'custom_parameter_4': 'persona_name'
    }
  });
</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NSW Burns Community Survey Results</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0" defer></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" defer></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F8F7F4;
            color: #333;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 400px;
        }
        .chart-container-small {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 150px;
        }
        .chart-container-tall {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 500px;
            max-height: 550px;
        }
        .chart-container-large {
             position: relative;
            width: 100%;
            max-width: 900px;
            margin-left: auto;
            margin-right: auto;
            height: 450px;
            max-height: 500px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
                max-height: 450px;
            }
            .chart-container-tall {
                height: 600px;
                max-height: 650px;
            }
             .chart-container-large {
                height: 500px;
                max-height: 550px;
            }
        }
        .nav-link {
            transition: color 0.3s ease, border-color 0.3s ease;
        }
        .nav-link.active {
            color: #D97706; /* amber-600 */
            border-bottom-color: #D97706;
        }
        .persona-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .persona-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        }
        .price-card {
            background: linear-gradient(135deg, #fef3c7, #fde68a);
        }
        .modal-backdrop {
            transition: opacity 0.3s ease-in-out;
        }
        .modal-content {
            transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out;
        }
        .legend {
            background: white;
            padding: 10px;
            border-radius: 4px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            font-size: 12px;
        }
        .legend-item {
            display: flex;
            align-items: center;
            margin: 5px 0;
        }
        .legend-color {
            width: 20px;
            height: 20px;
            margin-right: 8px;
            border-radius: 3px;
        }
        .weighted-center-marker {
            z-index: 1000 !important;
        }
        .weighted-center-marker div {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
    </style>

<!--[if gte mso 9]><xml>
<mso:CustomDocumentProperties>
<mso:_dlc_DocId msdt:dt="string">3CEWKAJ56SRM-1841924160-116627</mso:_dlc_DocId>
<mso:_dlc_DocIdItemGuid msdt:dt="string">c9ded1e4-d0d0-4955-826d-28de41e703b5</mso:_dlc_DocIdItemGuid>
<mso:_dlc_DocIdUrl msdt:dt="string">https://unisyd.sharepoint.com/sites/RP/_layouts/15/DocIdRedir.aspx?ID=3CEWKAJ56SRM-1841924160-116627, 3CEWKAJ56SRM-1841924160-116627</mso:_dlc_DocIdUrl>
</mso:CustomDocumentProperties>
</xml><![endif]-->
</head>
<body class="bg-stone-50 text-stone-800">

    <header class="bg-white/80 backdrop-blur-lg sticky top-0 z-50 border-b border-stone-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center">
                    <span class="font-bold text-xl text-amber-700">NSW Burns Survey Report</span>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <a href="#who-we-are" class="nav-link text-stone-600 hover:text-amber-600 px-1 py-2 border-b-2 border-transparent text-sm font-medium">Who We Are</a>
                        <a href="#geographic-distribution" class="nav-link text-stone-600 hover:text-amber-600 px-1 py-2 border-b-2 border-transparent text-sm font-medium">Geographic Distribution</a>
                        <a href="#our-culture" class="nav-link text-stone-600 hover:text-amber-600 px-1 py-2 border-b-2 border-transparent text-sm font-medium">Culture & Values</a>
                        <a href="#our-capabilities" class="nav-link text-stone-600 hover:text-amber-600 px-1 py-2 border-b-2 border-transparent text-sm font-medium">Capabilities</a>
                        <a href="#future-vision" class="nav-link text-stone-600 hover:text-amber-600 px-1 py-2 border-b-2 border-transparent text-sm font-medium">Future Preferences</a>
                        <a href="#resources-feedback" class="nav-link text-stone-600 hover:text-amber-600 px-1 py-2 border-b-2 border-transparent text-sm font-medium">Resources & Feedback</a>
                    </div>
                </div>
                 <div class="md:hidden">
                    <button id="mobile-menu-button" class="inline-flex items-center justify-center p-2 rounded-md text-stone-600 hover:text-amber-600 hover:bg-stone-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-amber-500">
                        <span class="sr-only">Open main menu</span>
                        <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>
        <div id="mobile-menu" class="md:hidden hidden">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                <a href="#who-we-are" class="nav-link text-stone-600 hover:text-amber-600 block px-3 py-2 rounded-md text-base font-medium">Who We Are</a>
                <a href="#geographic-distribution" class="nav-link text-stone-600 hover:text-amber-600 block px-3 py-2 rounded-md text-base font-medium">Geographic Distribution</a>
                <a href="#our-culture" class="nav-link text-stone-600 hover:text-amber-600 block px-3 py-2 rounded-md text-base font-medium">Culture & Values</a>
                <a href="#our-capabilities" class="nav-link text-stone-600 hover:text-amber-600 block px-3 py-2 rounded-md text-base font-medium">Capabilities</a>
                <a href="#future-vision" class="nav-link text-stone-600 hover:text-amber-600 block px-3 py-2 rounded-md text-base font-medium">Future Preferences</a>
                <a href="#resources-feedback" class="nav-link text-stone-600 hover:text-amber-600 block px-3 py-2 rounded-md text-base font-medium">Resources & Feedback</a>
            </div>
        </div>
    </header>

    <main>
        <section id="about-ibag" class="py-16 sm:py-24 bg-stone-100">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center">
                    <h2 class="text-base font-semibold text-amber-600 tracking-wide uppercase">About This Report</h2>
                    <p class="mt-2 text-3xl font-bold tracking-tight text-stone-900 sm:text-4xl">The Independent Burners Analytics Group</p>
                    <p class="mt-4 max-w-3xl mx-auto text-lg text-stone-500">This report presents data from a survey conducted by a volunteer group of community members. The goal was to gather information to inform future community planning and events.</p>
                </div>

                <div class="mt-12 bg-white p-6 sm:p-8 rounded-lg shadow-sm">
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                        <div class="text-center">
                            <h3 class="font-semibold text-stone-900">Peter Simpson-Young</h3>
                            <p class="mt-2 text-sm text-stone-600">Background in neuroscience and philosophy; currently works in research translation strategy. Co-leads the Bourges Douf theme camp.</p>
                        </div>
                        <div class="text-center">
                            <h3 class="font-semibold text-stone-900">Teresa Trevoire</h3>
                            <p class="mt-2 text-sm text-stone-600">Background as a Sexologist, Psychotherapist, and Communications Strategist. Leads the Garden of Squirting Nymphs theme camp.</p>
                            <p class="mt-2 text-xs text-stone-500"><strong>COI:</strong> SBA membership sub committee, Garden of Squirting Nymphs lead, professional counselling practice</p>
                        </div>
                        <div class="text-center">
                            <h3 class="font-semibold text-stone-900">Ariane "Shiny" Blanch</h3>
                            <p class="mt-2 text-sm text-stone-600">Background in physics, medical research, and IT with expertise in data integration and visualisation.</p>
                            <p class="mt-2 text-xs text-stone-500"><strong>COI:</strong> Burning Man Regional Contact, Former Sunburnt Events Director, Former BOSS Co-Chair</p>
                        </div>
                        <div class="text-center">
                            <h3 class="font-semibold text-stone-900">Dr Leanna Pugliese</h3>
                            <p class="mt-2 text-sm text-stone-600">Doctor of Pharmacy and Investigational Medicines specialist. Founder and Director of Sparkhaus Studio Makerspace.</p>
                            <p class="mt-2 text-xs text-stone-500"><strong>COI:</strong> Sunburnt Arts Director (acting), BM Regional Contact, BoNZA co-producer, former BOSS director/cofounder, former Burning Seed Town Councillor, Restructure team member 2019-2024</p>
                        </div>
                        <div class="text-center">
                            <h3 class="font-semibold text-stone-900">Gabe "Doof Daddy" Rey</h3>
                            <p class="mt-2 text-sm text-stone-600">Risk and Public Safety Investigations Officer for the NSW Government with degrees in Human Geography, Public Safety, and Psychology.</p>
                            <p class="mt-2 text-xs text-stone-500"><strong>COI:</strong> Sunburnt Arts Director (acting)</p>
                        </div>
                        <div class="text-center">
                            <h3 class="font-semibold text-stone-900">Dr Roland Warner</h3>
                            <p class="mt-2 text-sm text-stone-600">ICU specialist and climate organiser with an interest in using data for event planning.</p>
                            <p class="mt-2 text-xs text-stone-500"><strong>COI:</strong> Embers 2025 organiser</p>
                        </div>
                        <div class="text-center">
                            <h3 class="font-semibold text-stone-900">Ale Mac</h3>
                            <p class="mt-2 text-sm text-stone-600">Background as a Psychologist with experience in IT support.</p>
                            <p class="mt-2 text-xs text-stone-500"><strong>COI:</strong> BM Regional Contact Sydney, Embers 2025 organiser</p>
                        </div>
                        <div class="text-center">
                            <h3 class="font-semibold text-stone-900">Dr Felipe Aires</h3>
                            <p class="mt-2 text-sm text-stone-600">Background in Fire Science, Knowledge Management, and Bushfire Management.</p>
                            <p class="mt-2 text-xs text-stone-500"><strong>COI:</strong> Embers 2025 organiser, Ex-SBE director</p>
                        </div>
                        <div class="text-center">
                            <h3 class="font-semibold text-stone-900">Alicia Dudek</h3>
                            <p class="mt-2 text-sm text-stone-600">Specialist in Design Ethnography and founder of MycoReality.</p>
                        </div>
                    </div>
                    
                    <div class="mt-8 pt-8 border-t border-stone-200">
                        <p class="text-center text-stone-600">
                            <span class="font-semibold">Acknowledgements:</span> Thank you to the 518 community members who participated in the survey. Thank you to the theme camps and volunteers who assisted with distribution. Special thanks to <strong>Rowan Kos</strong> for project initiation and to <strong>Amelia Loye</strong> for her prior work in Australian Burner census-taking.
                        </p>
                    </div>
                </div>

                <div class="mt-8 text-center">
                    <p class="text-sm text-stone-500 italic max-w-3xl mx-auto">
                        The Independent Burners Analytics Group (I-BAG) is a volunteer group of community members with diverse professional backgrounds. The group operated independently to collect and present the data in this report.
                    </p>
                </div>
            </div>
        </section>

        <section id="home" class="py-20 sm:py-28">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
                <h1 class="text-4xl sm:text-5xl lg:text-6xl font-bold tracking-tight text-stone-900">2025 NSW Burns Community Survey Results</h1>
                <p class="mt-6 max-w-3xl mx-auto text-lg sm:text-xl text-stone-600">An interactive report presenting data from the 2025 NSW Burns Community Survey. This report details community demographics, experiences, and preferences.</p>
                <div class="mt-12 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8">
                    <div class="bg-white p-6 rounded-lg shadow-sm">
                        <p class="text-4xl font-bold text-amber-600">518</p>
                        <p class="mt-2 text-stone-600">Respondents</p>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-sm">
                        <p class="text-4xl font-bold text-teal-600">58%</p>
                        <p class="mt-2 text-stone-600">Neurodivergent</p>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-sm">
                        <p class="text-4xl font-bold text-sky-600">425+</p>
                        <p class="mt-2 text-stone-600">Willing to Volunteer</p>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-sm">
                        <p class="text-4xl font-bold text-rose-600">83%</p>
                        <p class="mt-2 text-stone-600">Attended >1 Burn</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="who-we-are" class="py-16 sm:py-24 bg-white">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center">
                    <h2 class="text-base font-semibold text-amber-600 tracking-wide uppercase">Respondent Demographics</h2>
                    <p class="mt-2 text-3xl font-bold tracking-tight text-stone-900 sm:text-4xl">Who We Are</p>
                    <p class="mt-4 max-w-2xl mx-auto text-lg text-stone-500">This section details the demographic data of the survey respondents, including age, location, event experience, and parental status.</p>
                </div>

                <div class="mt-16">
                    <h3 class="text-xl sm:text-2xl font-bold text-stone-900 text-center">Age Distribution</h3>
                    <p class="mt-3 text-base text-stone-600 text-center max-w-3xl mx-auto">The largest age group of respondents is 35-54, accounting for 73% of the total.</p>
                    <div class="mt-6 chart-container max-w-2xl mx-auto"><canvas id="ageChart"></canvas></div>
                </div>
                <div class="mt-16">
                    <h3 class="text-xl sm:text-2xl font-bold text-stone-900 text-center">Event Experience</h3>
                    <p class="mt-3 text-base text-stone-600 text-center max-w-3xl mx-auto">83% of respondents have attended more than one Burner event, and 61% have attended five or more.</p>
                    <div class="mt-6 chart-container max-w-md"><canvas id="experienceChart"></canvas></div>
                </div>
                
                <div class="mt-16 bg-stone-100 p-6 sm:p-8 rounded-lg">
                    <h3 class="text-xl sm:text-2xl font-bold text-stone-900 text-center">Family & Kids' Participation</h3>
                    <p class="mt-3 text-base text-stone-600 text-center max-w-3xl mx-auto">21% of respondents have children under 18. Of this group, 66% have brought or would consider bringing their children to events.</p>
                    <div class="mt-8 grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                        <div>
                             <h4 class="text-lg font-semibold text-stone-800 text-center">Parents in the Community</h4>
                             <p class="mt-2 text-sm text-stone-600 text-center">Percentage of respondents with children under 18.</p>
                             <div class="mt-4 chart-container max-w-xs"><canvas id="familyStatusChart"></canvas></div>
                        </div>
                        <div>
                             <h4 class="text-lg font-semibold text-stone-800 text-center">Bringing Kids to Events</h4>
                             <p class="mt-2 text-sm text-stone-600 text-center">Of those with children, the breakdown of whether they bring them.</p>
                             <div class="mt-4 chart-container"><canvas id="bringKidsChart"></canvas></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="geographic-distribution" class="py-16 sm:py-24 bg-stone-100">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center">
                    <h2 class="text-base font-semibold text-amber-600 tracking-wide uppercase">Geographic Analysis</h2>
                    <p class="mt-2 text-3xl font-bold tracking-tight text-stone-900 sm:text-4xl">Geographic Distribution</p>
                    <p class="mt-4 max-w-2xl mx-auto text-lg text-stone-500">Interactive heatmap showing the geographic distribution of survey respondents across Australia, with postcode-level clustering and density visualization.</p>
                </div>
                
                <div class="mt-12 bg-white p-6 sm:p-8 rounded-lg shadow-sm">
                    <div class="mb-6">
                        <h3 class="text-xl sm:text-2xl font-bold text-stone-900 text-center">Respondent Locations</h3>
                        <p class="mt-3 text-base text-stone-600 text-center max-w-3xl mx-auto">This interactive map shows where survey respondents are located across Australia. Each circle represents a Local Government Area (LGA), with size and color indicating the number of respondents in that area. This approach protects privacy by aggregating data at the LGA level rather than showing individual postcodes.</p>
                    </div>
                    <div id="interactive-map" style="height: 600px; width: 100%; border-radius: 8px; overflow: hidden;"></div>
                    <div class="mt-6 text-center text-sm text-stone-500">
                        <p>Click on any circle to see detailed information about that LGA area.</p>
                    </div>
                </div>
                
                <div class="mt-12 bg-stone-100 p-6 sm:p-8 rounded-lg">
                    <h3 class="text-xl sm:text-2xl font-bold text-stone-900 text-center">State Distribution</h3>
                    <p class="mt-3 text-base text-stone-600 text-center max-w-3xl mx-auto">The majority of respondents reside in NSW, with representation from other states, primarily Victoria and the ACT.</p>
                    <div class="mt-6 chart-container max-w-2xl mx-auto"><canvas id="locationStatesChart"></canvas></div>
                </div>
            </div>
        </section>

        <section id="our-culture" class="py-16 sm:py-24">
             <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center">
                    <h2 class="text-base font-semibold text-teal-600 tracking-wide uppercase">Values & Needs</h2>
                    <p class="mt-2 text-3xl font-bold tracking-tight text-stone-900 sm:text-4xl">Culture & Values</p>
                    <p class="mt-4 max-w-2xl mx-auto text-lg text-stone-500">This section outlines primary motivations for event attendance, community connection levels, and data on neurodivergence and accessibility needs.</p>
                </div>
                <div class="mt-16 bg-white p-6 sm:p-8 rounded-lg shadow-sm">
                    <h3 class="text-xl sm:text-2xl font-bold text-stone-900 text-center">Primary Motivations for Attending</h3>
                    <p class="mt-3 text-base text-stone-600 text-center">The most frequently cited motivations for attending events are 'Community & Connection' and 'Self-Expression'.</p>
                    <div class="mt-6 chart-container"><canvas id="motivationsChart"></canvas></div>
                    <div class="mt-8 text-left">
                         <h4 class="text-lg font-semibold text-stone-800">Top Motivators (by respondent count):</h4>
                         <ul class="mt-4 space-y-4 text-stone-600">
                             <li class="flex items-start">
                                 <span class="text-teal-500 font-bold mr-3 mt-1">&#10148;</span>
                                 <div><strong class="text-stone-800">Community & Connection (76%):</strong> Selected by 367 respondents.
                                     <blockquote class="mt-1 pl-4 border-l-4 border-stone-200 text-sm text-stone-500">Quote: "It's always about community..."</blockquote>
                                 </div>
                             </li>
                             <li class="flex items-start">
                                 <span class="text-teal-500 font-bold mr-3 mt-1">&#10148;</span>
                                 <div><strong class="text-stone-800">Self-Expression & Creativity (62%):</strong> Selected by 299 respondents.
                                     <blockquote class="mt-1 pl-4 border-l-4 border-stone-200 text-sm text-stone-500">Quote: "Being able to be myself and drop the mask..."</blockquote>
                                 </div>
                             </li>
                         </ul>
                    </div>
                </div>
                
                <div class="mt-16 bg-stone-100 p-6 sm:p-8 rounded-lg">
                    <h3 class="text-xl sm:text-2xl font-bold text-stone-900 text-center">Current Community Connection</h3>
                    <p class="mt-3 text-base text-stone-600 text-center max-w-3xl mx-auto">Respondents were asked about their sense of connection to the broader community. 18% reported feeling 'Very Connected', while 31% reported feeling 'Neutral', 'Somewhat Disconnected', or 'Very Disconnected'.</p>
                    <div class="mt-6 chart-container-small"><canvas id="communityConnectionChart"></canvas></div>
                </div>

                 <div class="mt-16 grid grid-cols-1 lg:grid-cols-2 gap-16 items-center">
                    <div>
                        <h3 class="text-xl sm:text-2xl font-bold text-stone-900">Neurodivergence</h3>
                        <p class="mt-3 text-base text-stone-600">58% of respondents identify as neurodivergent or are exploring a diagnosis.</p>
                        <div class="mt-6 chart-container max-w-md"><canvas id="neurodivergentChart"></canvas></div>
                    </div>
                    <div class="bg-stone-100 p-6 sm:p-8 rounded-lg">
                        <h3 class="text-xl sm:text-2xl font-bold text-stone-900 text-center">Accessibility Needs</h3>
                        <p class="mt-3 text-base text-stone-600 text-center max-w-3xl mx-auto">A total of 77% of respondents indicated they would benefit from one or more accessibility features. The most selected categories were related to sensory and physical accessibility.</p>
                        <div class="grid grid-cols-1 xl:grid-cols-2 gap-8 mt-6">
                            <div>
                                <h4 class="text-lg font-semibold text-center">Sensory & Social Accessibility</h4>
                                <div class="mt-2 chart-container"><canvas id="accessibilityNeedsChart"></canvas></div>
                            </div>
                            <div>
                                <h4 class="text-lg font-semibold text-center">Physical Accessibility</h4>
                                <div class="mt-2 chart-container"><canvas id="physicalAccessibilityChart"></canvas></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="our-capabilities" class="py-16 sm:py-24 bg-white">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center">
                    <h2 class="text-base font-semibold text-sky-600 tracking-wide uppercase">Skills & Contributions</h2>
                    <p class="mt-2 text-3xl font-bold tracking-tight text-stone-900 sm:text-4xl">Our Capabilities</p>
                    <p class="mt-4 max-w-2xl mx-auto text-lg text-stone-500">This section presents data on how community members contribute, their skills, volunteer experience, and interest in leadership roles.</p>
                </div>

                <div class="mt-16 grid grid-cols-1 lg:grid-cols-2 gap-16 items-center">
                     <div>
                        <h3 class="text-xl sm:text-2xl font-bold text-stone-900">How Respondents Contribute</h3>
                        <p class="mt-3 text-base text-stone-600">Respondents contribute in various ways, with the most common being Theme Camp member, Event volunteer, and Individual participant.</p>
                        <div class="mt-6 chart-container"><canvas id="contributionChart"></canvas></div>
                    </div>
                    <div class="bg-stone-100 p-6 sm:p-8 rounded-lg">
                        <h3 class="text-xl sm:text-2xl font-bold text-stone-900">Community Skillset</h3>
                        <p class="mt-3 text-base text-stone-600">Respondents reported a wide range of practical skills they are willing to contribute, with options to either lead a team or help out.</p>
                        <div class="mt-6 chart-container-tall"><canvas id="skillsChart"></canvas></div>
                    </div>
                </div>
                
                <div class="mt-16">
                    <h3 class="text-xl sm:text-2xl font-bold text-stone-900 text-center">Volunteer Experience</h3>
                    <p class="mt-3 text-base text-stone-600 text-center max-w-3xl mx-auto">Respondents have previous volunteer experience across a wide variety of event roles.</p>
                    <div class="mt-6 chart-container-tall"><canvas id="volunteerChart"></canvas></div>
                </div>
                <div class="mt-16">
                    <h3 class="text-xl sm:text-2xl font-bold text-stone-900 text-center">Leadership Interest</h3>
                    <p class="mt-3 text-base text-stone-600 text-center max-w-3xl mx-auto">51% of respondents expressed interest in coordination or leadership roles, from Team Member to Department Captain.</p>
                    <div class="mt-6 chart-container"><canvas id="leadershipChart"></canvas></div>
                    <div class="mt-8 max-w-2xl mx-auto bg-white p-6 rounded-lg shadow-sm">
                         <h4 class="text-lg font-semibold text-stone-800">Expected Leadership Time Commitment</h4>
                         <p class="mt-2 text-stone-600">Those interested in leadership roles indicated the weekly hours they would expect to commit during event season.</p>
                         <ul class="mt-4 space-y-2 text-sm">
                             <li class="flex justify-between items-center"><span class="font-medium text-stone-700">Team Leads:</span> <span class="text-stone-600">1-4 hours weekly (event season)</span></li>
                             <li class="flex justify-between items-center"><span class="font-medium text-stone-700">Department Captains:</span> <span class="text-stone-600">4-8 hours weekly (event season)</span></li>
                             <li class="flex justify-between items-center"><span class="font-medium text-stone-700">Strategic Roles:</span> <span class="text-stone-600">3-5 hours weekly (year round)</span></li>
                         </ul>
                    </div>
                </div>
                <div class="mt-16">
                    <h3 class="text-3xl font-bold text-stone-900 text-center">Community Personas</h3>
                    <p class="mt-4 max-w-3xl mx-auto text-center text-lg text-stone-600">Five archetypes were synthesized from the data to help illustrate the different types of participants in the community. Click on each persona to learn more.</p>
                    <div id="personas-container" class="mt-12 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    </div>
                </div>
            </div>
        </section>
    
        <section id="future-vision" class="py-16 sm:py-24">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center">
                    <h2 class="text-base font-semibold text-rose-600 tracking-wide uppercase">Event Logistics</h2>
                    <p class="mt-2 text-3xl font-bold tracking-tight text-stone-900 sm:text-4xl">Future Preferences</p>
                    <p class="mt-4 max-w-2xl mx-auto text-lg text-stone-500">This section details respondent preferences regarding future events, including event size, timing, location, and ticket pricing.</p>
                </div>
                
                <div class="mt-16 bg-white p-6 sm:p-8 rounded-lg shadow-sm">
                    <h3 class="text-xl sm:text-2xl font-bold text-stone-900 text-center">At a Glance: Community Priorities</h3>
                    <p class="mt-3 text-base text-stone-600 text-center max-w-3xl mx-auto">This chart consolidates responses to several questions to provide an overview of stated priorities. Building local community and ensuring accessibility were rated as highly important by many respondents.</p>
                    <div class="mt-6 chart-container-large"><canvas id="prioritiesChart"></canvas></div>
                </div>
                
                <div class="mt-12 bg-stone-100 p-6 sm:p-8 rounded-lg">
                    <h3 class="text-xl sm:text-2xl font-bold text-stone-900 text-center">Importance of Large-Scale Art Burns</h3>
                    <p class="mt-3 text-base text-stone-600 text-center max-w-3xl mx-auto">51% of respondents consider large-scale art burns 'Essential' or 'Very Important', while 42% see them as 'Nice but not essential'.</p>
                    <div class="mt-6 chart-container-small"><canvas id="artBurnsImportanceChart"></canvas></div>
                </div>
                
                <div class="mt-12 bg-white p-6 sm:p-8 rounded-lg shadow-sm">
                    <h3 class="text-xl sm:text-2xl font-bold text-stone-900 text-center">Monthly Event Likelihood</h3>
                    <p class="mt-3 text-base text-stone-600 text-center max-w-3xl mx-auto">Respondents indicated they were most likely to attend events in March, April, October, and November.</p>
                    <div class="mt-6 chart-container-large"><canvas id="monthlyLikelihoodChart"></canvas></div>
                </div>

                <div class="mt-12 bg-stone-100 p-6 sm:p-8 rounded-lg">
                    <h3 class="text-xl sm:text-2xl font-bold text-stone-900 text-center">Fire Season Trade-offs</h3>
                    <p class="mt-3 text-base text-stone-600 text-center max-w-3xl mx-auto">When asked to choose between event timing and the presence of fire art due to restrictions, 44% prefer warmer months without burns, while 23% prefer colder months with burns. 34% had no preference.</p>
                    <div class="mt-6 chart-container max-w-md"><canvas id="fireSeasonTradeoffsChart"></canvas></div>
                </div>

                <div class="mt-12 bg-white p-6 sm:p-8 rounded-lg shadow-sm">
                    <h3 class="text-xl sm:text-2xl font-bold text-stone-900 text-center">Preferred Long Weekend</h3>
                    <p class="mt-3 text-base text-stone-600 text-center max-w-3xl mx-auto">The October Labour Day long weekend was the most selected option, followed by Easter. 43% of respondents indicated any long weekend would work.</p>
                    <div class="mt-6 chart-container"><canvas id="timingChart"></canvas></div>
                </div>
                
                <div class="mt-12 bg-stone-100 p-6 sm:p-8 rounded-lg">
                    <h3 class="text-xl sm:text-2xl font-bold text-stone-900 text-center">Public Holidays Importance</h3>
                    <p class="mt-3 text-base text-stone-600 text-center max-w-3xl mx-auto">When asked about the importance of holding events on public holidays, 38% rated them as 'Very' or 'Somewhat' important, while 34% rated them as 'Somewhat' or 'Not' important.</p>
                    <div class="mt-6 chart-container-small"><canvas id="publicHolidaysChart"></canvas></div>
                </div>

                <div class="mt-12 bg-white p-6 sm:p-8 rounded-lg shadow-sm">
                    <h3 class="text-xl sm:text-2xl font-bold text-stone-900 text-center">Travel Willingness by Event Size</h3>
                    <p class="mt-3 text-base text-stone-600 text-center max-w-3xl mx-auto">Willingness to travel generally increases with event size. The most selected travel time for a mini-burn is up to 4 hours, while for larger burns, it is up to 6 hours.</p>
                    <div class="mt-6 chart-container-large"><canvas id="travelWillingnessChart"></canvas></div>
                </div>

                <div class="mt-16">
                    <h3 class="text-3xl font-bold text-stone-900 text-center">Ticket Pricing Analysis</h3>
                    <p class="mt-4 max-w-3xl mx-auto text-center text-lg text-stone-600">The Westendorp Price Sensitivity Meter analysis identified a price range based on respondent perceptions of value and affordability.</p>
                    <div class="mt-12 grid grid-cols-1 md:grid-cols-3 gap-8">
                        <div class="bg-white p-6 rounded-lg shadow-sm border-t-4 border-sky-500">
                            <h4 class="font-semibold text-stone-800">Point of Marginal Cheapness</h4>
                            <p class="text-4xl font-bold text-sky-600 mt-2">$350</p>
                            <p class="mt-2 text-sm text-stone-600">The price point below which the largest number of respondents begin to question the event's quality.</p>
                        </div>
                        <div class="price-card p-8 rounded-lg shadow-lg border-t-4 border-amber-500 text-center">
                            <h4 class="font-bold text-xl text-amber-800">Optimal Price Point</h4>
                            <p class="text-6xl font-extrabold text-amber-700 mt-2">$400</p>
                            <p class="mt-3 text-sm text-amber-900 font-medium">The intersection of the 'Too Cheap' and 'Too Expensive' curves, suggesting a price that balances value and affordability.</p>
                        </div>
                        <div class="bg-white p-6 rounded-lg shadow-sm border-t-4 border-rose-500">
                             <h4 class="font-semibold text-stone-800">Point of Marginal Expensiveness</h4>
                            <p class="text-4xl font-bold text-rose-600 mt-2">$450</p>
                            <p class="mt-2 text-sm text-stone-600">The price point above which the largest number of respondents consider the event too expensive to attend.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="resources-feedback" class="py-16 sm:py-24 bg-white">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center">
                    <h2 class="text-base font-semibold text-amber-600 tracking-wide uppercase">Participant Feedback</h2>
                    <p class="mt-2 text-3xl font-bold tracking-tight text-stone-900 sm:text-4xl">Resources & Feedback</p>
                    <p class="mt-4 max-w-2xl mx-auto text-lg text-stone-500">This section summarizes community-provided resources and presents key feedback themes based on open-text responses from the survey.</p>
                </div>
                <div class="mt-16 bg-stone-100 p-6 sm:p-8 rounded-lg">
                    <h3 class="text-xl sm:text-2xl font-bold text-stone-900 text-center">Community-Sourced Resources</h3>
                    <div class="mt-8 grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div class="bg-white p-6 rounded-lg">
                            <h4 class="text-lg font-semibold text-stone-900 mb-4">Suggested Event Locations</h4>
                            <ul class="space-y-3 text-sm text-stone-700">
                                <li><strong class="text-stone-800">Top Suggestions:</strong> Glenworth Valley, Dragon Dreaming site (Wee Jasper), Confest site (Woorooma Station).</li>
                                <li><strong class="text-stone-800">Other Leads:</strong> Contacts for properties in Bellingen, Mandalong, and "The Lair".</li>
                            </ul>
                        </div>
                        <div class="bg-white p-6 rounded-lg">
                            <h4 class="text-lg font-semibold text-stone-900 mb-4">Community Suppliers & Equipment</h4>
                            <ul class="space-y-3 text-sm text-stone-700">
                                 <li><strong class="text-stone-800">Sound/AV:</strong> Cody Lawton (Litness Lights), Justin "Cosmos" James (Dynamic Audio Visual).</li>
                                 <li><strong class="text-stone-800">Maker Spaces:</strong> Newcastle's Sparkhaus and Sydney's RoboDino.</li>
                            </ul>
                        </div>
                        <div class="bg-white p-6 rounded-lg">
                            <h4 class="text-lg font-semibold text-stone-900 mb-4">Support for Artists & Theme Camps</h4>
                            <ul class="space-y-3 text-sm text-stone-700">
                                <li><strong class="text-stone-800">Primary Need:</strong> Increased and more accessible funding.</li>
                                <li><strong class="text-stone-800">Shared Resources:</strong> Desire for a community "Library of Things".</li>
                            </ul>
                        </div>
                         <div class="bg-white p-6 rounded-lg">
                            <h4 class="text-lg font-semibold text-stone-900 mb-4">Potential Community Partners</h4>
                            <ul class="space-y-3 text-sm text-stone-700">
                                 <li><strong class="text-stone-800">Festivals:</strong> ConFest, Dragon Dreaming, Modifyre (QLD), Blazing Swan (WA).</li>
                                 <li><strong class="text-stone-800">Arts/Maker Groups:</strong> Sparkhaus, local Men's Sheds, Newtown Festival.</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="mt-16">
                    <h3 class="text-xl sm:text-2xl font-bold text-stone-900 text-center">Key Feedback Themes</h3>
                    <p class="mt-3 text-base text-stone-600 text-center max-w-3xl mx-auto">This section explores detailed feedback from key contributor groups, revealing common themes around sustainability, communication, and the need for better structural support.</p>
                    <div class="mt-12 space-y-8">
                        <div class="p-4 bg-stone-50 rounded-lg">
                            <h4 class="text-lg font-semibold text-stone-800">Volunteer Experience</h4>
                            <p class="mt-2 text-stone-600">Common feedback from volunteers included requests for shorter, more manageable shifts and better support systems to prevent burnout.</p>
                        </div>
                        <div class="p-4 bg-stone-50 rounded-lg">
                            <h4 class="text-lg font-semibold text-stone-800">Theme Camp Challenges</h4>
                            <p class="mt-2 text-stone-600">Theme camp leads cited workload, financial pressures, and logistics as significant challenges.</p>
                        </div>
                        <div class="p-4 bg-stone-50 rounded-lg">
                            <h4 class="text-lg font-semibold text-stone-800">Artist Challenges</h4>
                            <p class="mt-2 text-stone-600">Artists noted funding limitations and logistical complexities as primary challenges.</p>
                        </div>
                        <div class="p-4 bg-stone-50 rounded-lg">
                            <h4 class="text-lg font-semibold text-stone-800">Leadership Sustainability</h4>
                            <p class="mt-2 text-stone-600">Those in leadership roles expressed a desire for more formalised processes and clearer documentation to ensure sustainability and prevent burnout.</p>
                        </div>
                    </div>
                </div>
                <div class="mt-16 bg-stone-100 p-6 sm:p-8 rounded-lg">
                    <h3 class="text-xl sm:text-2xl font-bold text-stone-900 text-center">Data-Driven Takeaways</h3>
                     <p class="mt-3 text-base text-stone-600 text-center max-w-3xl mx-auto">The following points summarize key takeaways derived from the comprehensive analysis of community data.</p>
                     <div class="mt-12 text-left space-y-8">
                        <div>
                            <h4 class="text-lg font-semibold text-stone-800">1. Governance & Communication</h4>
                            <div class="mt-4 space-y-4">
                                <div class="bg-white p-4 rounded-md shadow-sm">
                                    <p class="font-semibold">A desire for formal governance structures with defined roles and transparent processes was a common theme in feedback.</p>
                                </div>
                                <div class="bg-white p-4 rounded-md shadow-sm">
                                    <p class="font-semibold">Feedback indicated a need for a central communication platform to serve as a single source of truth, reducing reliance on social media.</p>
                                </div>
                            </div>
                        </div>
                        <div>
                            <h4 class="text-lg font-semibold text-stone-800">2. Event Planning</h4>
                             <div class="mt-4 space-y-4">
                                <div class="bg-white p-4 rounded-md shadow-sm">
                                    <p class="font-semibold">Data shows divided preferences, with some favoring one large annual burn and others preferring multiple smaller, more accessible events.</p>
                                </div>
                                 <div class="bg-white p-4 rounded-md shadow-sm">
                                    <p class="font-semibold">With 58% of respondents identifying as neurodivergent, accessibility (particularly sensory-friendly spaces) is a key consideration for a majority of the community.</p>
                                </div>
                            </div>
                        </div>
                        <div>
                            <h4 class="text-lg font-semibold text-stone-800">3. Community Resources</h4>
                             <div class="mt-4 space-y-4">
                                <div class="bg-white p-4 rounded-md shadow-sm">
                                    <p class="font-semibold">Respondents expressed interest in a community-wide, opt-in directory of skills and resources to leverage internal assets.</p>
                                </div>
                                <div class="bg-white p-4 rounded-md shadow-sm">
                                    <p class="font-semibold">Feedback suggests a need for a dedicated community relations role to manage external relationships for site procurement and compliance.</p>
                                </div>
                            </div>
                        </div>
                     </div>
                </div>
                 <div id="conclusion" class="mt-16">
                    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
                        <h2 class="text-3xl font-bold tracking-tight text-stone-900 sm:text-4xl">Survey Summary</h2>
                        <p class="mt-6 text-lg text-stone-600">The data collected from 518 respondents shows a community with a high percentage of experienced participants (83% have attended more than one event), a large number of members willing to volunteer their skills (over 425 individuals), and a significant neurodivergent population (58%). The information gathered on preferences for event timing, location, and cost provides a quantitative foundation for future planning.</p>
                    </div>
                </div>
            </div>
        </section>


    </main>

    <div id="persona-modal" class="modal-backdrop fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 hidden z-50 opacity-0">
        <div class="modal-content bg-white rounded-lg shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto p-6 relative transform scale-95 opacity-0">
            <button id="close-modal-button" class="absolute top-4 right-4 text-stone-500 hover:text-stone-800">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
            </button>
            <div id="modal-body" class="prose max-w-none">
            </div>
        </div>
    </div>


    <footer class="bg-stone-800 text-white">
        <div class="max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8 text-center">
            <p>Interactive Report based on the 2025 NSW Burns Community Survey.</p>
            <p class="text-sm text-stone-400 mt-2">Data collected and presented by the Independent Burners Analytics Group (I-BAG).</p>
        </div>
    </footer>

    <script>
        // Function to initialize charts when Chart.js is ready
        function initializeCharts() {
            if (typeof Chart === 'undefined') {
                console.error('Chart.js is not loaded');
                return;
            }
            
            if (typeof ChartDataLabels === 'undefined') {
                console.error('ChartDataLabels plugin is not loaded');
                return;
            }
            
            Chart.register(ChartDataLabels);

            const chartColors = {
                amber: 'rgba(217, 119, 6, 0.8)',
                teal: 'rgba(13, 148, 136, 0.8)',
                sky: 'rgba(2, 132, 199, 0.8)',
                rose: 'rgba(225, 29, 72, 0.8)',
                stone: 'rgba(120, 113, 108, 0.8)',
                neutral: 'rgba(214, 211, 209, 0.8)',
                green: 'rgba(22, 163, 74, 0.8)',
                lightGreen: 'rgba(34, 197, 94, 0.8)',
                red: 'rgba(220, 38, 38, 0.8)',
                lightRed: 'rgba(252, 165, 165, 0.8)'
            };
            
            const chartBorderColors = {
                amber: 'rgb(217, 119, 6)',
                teal: 'rgb(13, 148, 136)',
                sky: 'rgb(2, 132, 199)',
                rose: 'rgb(225, 29, 72)',
                stone: 'rgb(120, 113, 108)',
                neutral: 'rgb(214, 211, 209)'
            };

            const defaultChartOptions = {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        backgroundColor: '#333',
                        titleFont: { size: 14, weight: 'bold' },
                        bodyFont: { size: 12 },
                        padding: 10,
                        cornerRadius: 4,
                        displayColors: false
                    },
                    datalabels: {
                        color: '#ffffff',
                        font: {
                            weight: 'bold'
                        },
                        formatter: (value, context) => {
                           if (context.chart.config.type === 'doughnut') {
                                const total = context.chart.data.datasets[0].data.reduce((a, b) => a + b, 0);
                                const percentage = (value / total * 100).toFixed(0) + '%';
                                return percentage;
                           }
                           return value;
                        }
                    }
                },
                scales: {
                    x: {
                        ticks: { color: '#57534e', font: { size: 12 } },
                        grid: { display: false }
                    },
                    y: {
                        ticks: { color: '#57534e', font: { size: 12 } },
                        grid: { color: '#e7e5e4' },
                        beginAtZero: true
                    }
                }
            };
            
            const allCharts = {};

            function createCharts() {
                allCharts.ageChart = new Chart(document.getElementById('ageChart'), {
                    type: 'bar',
                    data: {
                        labels: ['Under 18', '18-24', '25-34', '35-44', '45-54', '55-64', '65-74', '75-84', 'Prefer not to say'],
                        datasets: [{
                            label: 'Count',
                            data: [2, 1, 89, 233, 119, 25, 11, 1, 2],
                            backgroundColor: [chartColors.neutral, chartColors.stone, chartColors.sky, chartColors.amber, chartColors.teal, chartColors.rose, chartColors.neutral, chartColors.neutral, chartColors.neutral],
                            borderColor: Object.values(chartBorderColors),
                            borderWidth: 1
                        }]
                    },
                    options: { ...defaultChartOptions, indexAxis: 'y', plugins: { datalabels: { anchor: 'end', align: 'end', color: '#333' } } }
                });

                allCharts.locationStatesChart = new Chart(document.getElementById('locationStatesChart'), {
                    type: 'bar',
                    data: {
                        labels: ['NSW', 'Victoria', 'ACT', 'QLD', 'SA'],
                        datasets: [{
                            label: 'Count',
                            data: [364, 58, 28, 17, 7],
                            backgroundColor: [chartColors.amber, chartColors.teal, chartColors.sky, chartColors.rose, chartColors.stone],
                            borderColor: Object.values(chartBorderColors),
                            borderWidth: 1
                        }]
                    },
                    options: { ...defaultChartOptions, indexAxis: 'y', plugins: { datalabels: { anchor: 'end', align: 'start', color: '#333' } } }
                });

                allCharts.experienceChart = new Chart(document.getElementById('experienceChart'), {
                    type: 'doughnut',
                    data: {
                        labels: ['Attended 5+ events', 'Attended 2-4 events', 'Attended 1 event', 'Not attended'],
                        datasets: [{
                            data: [295, 105, 51, 29],
                            backgroundColor: [chartColors.amber, chartColors.teal, chartColors.sky, chartColors.rose],
                            borderColor: '#F8F7F4',
                            borderWidth: 4,
                            hoverOffset: 4
                        }]
                    },
                    options: { ...defaultChartOptions, plugins: { ...defaultChartOptions.plugins, legend: { display: true, position: 'bottom' } } }
                });

                allCharts.familyStatusChart = new Chart(document.getElementById('familyStatusChart'), {
                    type: 'doughnut',
                    data: {
                        labels: ['No', 'Yes'],
                        datasets: [{
                            data: [377, 103],
                            backgroundColor: [chartColors.stone, chartColors.teal],
                            borderColor: '#f1f5f9',
                            borderWidth: 4,
                            hoverOffset: 4
                        }]
                    },
                    options: { ...defaultChartOptions, plugins: { ...defaultChartOptions.plugins, legend: { display: true, position: 'bottom' } } }
                });

                allCharts.bringKidsChart = new Chart(document.getElementById('bringKidsChart'), {
                    type: 'bar',
                    data: {
                        labels: ['Yes, have/would', "I'm open to it", 'No, I prefer not to', 'Maybe, it depends'],
                        datasets: [{
                            label: 'Count',
                            data: [42, 24, 27, 7],
                            backgroundColor: [chartColors.green, chartColors.lightGreen, chartColors.red, chartColors.amber],
                            borderColor: Object.values(chartBorderColors),
                            borderWidth: 1
                        }]
                    },
                    options: { ...defaultChartOptions, plugins: { datalabels: { color: 'white' } } }
                });

                allCharts.neurodivergentChart = new Chart(document.getElementById('neurodivergentChart'), {
                    type: 'doughnut',
                    data: {
                        labels: ['No', 'Yes', "Questioning/Exploring"],
                        datasets: [{
                            data: [203, 179, 100],
                            backgroundColor: [chartColors.sky, chartColors.teal, chartColors.amber],
                            borderColor: '#F8F7F4',
                            borderWidth: 4,
                            hoverOffset: 4
                        }]
                    },
                    options: { ...defaultChartOptions, plugins: { ...defaultChartOptions.plugins, legend: { display: true, position: 'bottom' } } }
                });
                
                allCharts.motivationsChart = new Chart(document.getElementById('motivationsChart'), {
                    type: 'bar',
                    data: {
                        labels: ['Community & connection', 'Self-expression', 'Art & music', 'Escape', 'Personal growth'],
                        datasets: [{
                            label: 'Respondents',
                            data: [367, 299, 232, 183, 169],
                            backgroundColor: [chartColors.teal, chartColors.amber, chartColors.rose, chartColors.sky, chartColors.stone],
                            borderColor: Object.values(chartBorderColors),
                            borderWidth: 1
                        }]
                    },
                    options: { ...defaultChartOptions, indexAxis: 'y', plugins: { datalabels: { anchor: 'end', align: 'start', color: '#333' } } }
                });

                allCharts.accessibilityNeedsChart = new Chart(document.getElementById('accessibilityNeedsChart'), {
                    type: 'bar',
                    data: {
                        labels: ['Sound separation', 'Quiet/sensory zones', 'Clear info/signage', 'Social interaction support', 'Reduced sensory input'],
                        datasets: [{
                            label: 'Respondents',
                            data: [241, 217, 193, 140, 101],
                            backgroundColor: [chartColors.teal, chartColors.amber, chartColors.sky, chartColors.rose, chartColors.stone],
                            borderColor: Object.values(chartBorderColors),
                            borderWidth: 1
                        }]
                    },
                    options: { ...defaultChartOptions, indexAxis: 'y', plugins: { datalabels: { anchor: 'end', align: 'start', color: '#333' } } }
                });

                 allCharts.physicalAccessibilityChart = new Chart(document.getElementById('physicalAccessibilityChart'), {
                    type: 'bar',
                    data: {
                        labels: ['Stamina/fatigue', 'Chronic condition', 'Mobility', 'Other', 'Seeing', 'Hearing', 'Gripping'],
                        datasets: [{
                            label: 'Count',
                            data: [26, 24, 21, 18, 11, 7, 4],
                             backgroundColor: [chartColors.sky, chartColors.teal, chartColors.amber, chartColors.rose, chartColors.stone, chartColors.neutral, chartColors.neutral],
                            borderColor: Object.values(chartBorderColors),
                            borderWidth: 1
                        }]
                    },
                    options: { ...defaultChartOptions, indexAxis: 'y', plugins: { datalabels: { anchor: 'end', align: 'start', color: '#333' } } }
                });
                
                allCharts.contributionChart = new Chart(document.getElementById('contributionChart'), {
                    type: 'bar',
                    data: {
                        labels: ['Volunteer team lead', 'Event organiser', 'Art installation creator', 'Theme Camp lead', 'Individual participant', 'Event volunteer', 'Theme Camp member'],
                        datasets: [{
                            label: 'Count',
                            data: [82, 89, 104, 130, 229, 269, 284],
                            backgroundColor: [chartColors.rose, chartColors.amber, chartColors.teal, chartColors.sky, chartColors.stone, chartColors.neutral, chartColors.neutral],
                            borderColor: Object.values(chartBorderColors),
                            borderWidth: 1
                        }]
                    },
                    options: { ...defaultChartOptions, indexAxis: 'y', plugins: { datalabels: { anchor: 'end', align: 'start', color: '#333' } } }
                });

                allCharts.skillsChart = new Chart(document.getElementById('skillsChart'), {
                    type: 'bar',
                    data: {
                        labels: ['Artistic/Creative', 'Physical Labor/Building', 'Cooking/Hospitality', 'Event Management', 'Leadership/Organisation', 'Technical/Engineering', 'Teaching/Mentoring', 'Safety/Security', 'Medical/First Aid', 'Transportation/Logistics', 'Music/Performance', 'Documentation', 'Financial Resources'],
                        datasets: [
                            { label: 'Could lead a team', data: [69, 40, 44, 68, 85, 40, 45, 26, 13, 25, 35, 13, 12], backgroundColor: chartColors.sky },
                            { label: 'Happy to help', data: [269, 204, 199, 194, 169, 155, 152, 142, 123, 116, 111, 85, 80], backgroundColor: chartColors.teal }
                        ]
                    },
                     options: {
                        ...defaultChartOptions,
                        indexAxis: 'y',
                        scales: { x: { stacked: true }, y: { stacked: true } },
                        plugins: {
                            ...defaultChartOptions.plugins,
                            legend: { display: true, position: 'bottom' },
                             datalabels: {
                                color: '#fff',
                                formatter: (value) => value > 15 ? value : ''
                            }
                        }
                    }
                });

                allCharts.volunteerChart = new Chart(document.getElementById('volunteerChart'), {
                    type: 'bar',
                    data: {
                        labels: ['Leave No Trace', 'Gate', 'Greeter', 'Ranger', 'Crew Kitchen', 'DPI/Build', 'Art Department', 'Sanitation', 'Traffic', 'Site Management', 'Effigy/Temple builds', 'Medical/First Aid', 'Volunteer Coordination', 'Sanctuary/PEER', 'Admin/Finance', 'Fire Safety (FART)', 'Comms', 'Ice Sales', 'Placement', 'Lost & Found', 'Centre Camp', 'Tech Support', 'Consent Team', 'Legal', 'Participation Station'],
                        datasets: [{
                            label: 'Previous Experience',
                            data: [164, 139, 129, 98, 77, 72, 59, 55, 52, 47, 46, 43, 41, 36, 35, 34, 32, 31, 27, 27, 22, 16, 14, 14, 13],
                            backgroundColor: chartColors.sky,
                            borderColor: chartBorderColors.sky,
                            borderWidth: 1
                        }]
                    },
                    options: { ...defaultChartOptions, indexAxis: 'y', plugins: { datalabels: { anchor: 'end', align: 'start', color: '#333' } } }
                });
                
                allCharts.leadershipChart = new Chart(document.getElementById('leadershipChart'), {
                    type: 'bar',
                    data: {
                        labels: ['Team Member', 'Project Wrangler', 'Team Lead', 'Big Picture Visionary', 'Dept. Captain'],
                        datasets: [{
                            label: 'Interest Level',
                            data: [81, 70, 57, 38, 28],
                            backgroundColor: [chartColors.sky, chartColors.teal, chartColors.amber, chartColors.rose, chartColors.stone],
                            borderColor: Object.values(chartBorderColors),
                            borderWidth: 1
                        }]
                    },
                    options: { ...defaultChartOptions, indexAxis: 'y', plugins: { datalabels: { anchor: 'end', align: 'start', color: '#333' } } }
                });
                
                allCharts.prioritiesChart = new Chart(document.getElementById('prioritiesChart'), {
                    type: 'bar',
                    data: {
                        labels: ['Build NSW Community', 'Sydney Accessibility', 'Large Art Burn', 'Public Holidays', 'Official Status'],
                        datasets: [
                            { label: 'High Importance', data: [41.5, 29.2, 50.4, 8.1, 17.2], backgroundColor: chartColors.rose },
                            { label: 'Medium Importance', data: [41.5, 40.9, 41.7, 30.4, 23.0], backgroundColor: chartColors.amber },
                            { label: 'Neutral', data: [14.3, 20.3, 1.5, 27.2, 6.1], backgroundColor: chartColors.neutral },
                            { label: 'Low Importance', data: [2.7, 9.6, 6.4, 34.3, 53.8], backgroundColor: chartColors.stone }
                        ]
                    },
                    options: {
                        ...defaultChartOptions,
                        indexAxis: 'y',
                        scales: { x: { stacked: true, max: 100, ticks: { callback: (value) => value + '%' } }, y: { stacked: true } },
                        plugins: {
                            ...defaultChartOptions.plugins,
                            legend: { display: true, position: 'bottom' },
                            tooltip: { callbacks: { label: (context) => `${context.dataset.label}: ${context.raw.toFixed(1)}%` } },
                            datalabels: {
                                color: '#fff',
                                formatter: (value) => {
                                    if (value > 5) {
                                        return value.toFixed(0) + '%';
                                    }
                                    return '';
                                }
                            }
                        }
                    }
                });
                
                allCharts.monthlyLikelihoodChart = new Chart(document.getElementById('monthlyLikelihoodChart'), {
                    type: 'bar',
                    data: {
                        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                        datasets: [
                            { label: 'Very Likely', data: [124, 144, 178, 173, 114, 54, 44, 48, 126, 180, 170, 108], backgroundColor: chartColors.green },
                            { label: 'Somewhat Likely', data: [101, 101, 102, 118, 103, 71, 59, 71, 119, 120, 119, 80], backgroundColor: chartColors.lightGreen },
                            { label: 'Neutral', data: [46, 37, 56, 48, 79, 61, 52, 59, 60, 47, 42, 41], backgroundColor: chartColors.neutral },
                            { label: 'Somewhat Unlikely', data: [38, 46, 16, 20, 48, 99, 90, 78, 34, 9, 18, 57], backgroundColor: chartColors.lightRed },
                            { label: 'Very Unlikely', data: [65, 47, 22, 15, 24, 86, 125, 113, 33, 17, 24, 81], backgroundColor: chartColors.red }
                        ]
                    },
                    options: {
                        ...defaultChartOptions,
                        scales: { x: { stacked: true }, y: { stacked: true } },
                        plugins: {
                            ...defaultChartOptions.plugins,
                            legend: { display: true, position: 'bottom' },
                            datalabels: { display: false }
                        }
                    }
                });

                allCharts.travelWillingnessChart = new Chart(document.getElementById('travelWillingnessChart'), {
                    type: 'line',
                    data: {
                        labels: ['Up to 2 hours', 'Up to 4 hours', 'Up to 6 hours', 'Up to 8 hours', 'More than 8 hours'],
                        datasets: [
                            {
                                label: 'Mini-burn (<500)',
                                data: [72, 189, 67, 16, 2],
                                borderColor: chartBorderColors.sky,
                                backgroundColor: chartColors.sky,
                                tension: 0.4,
                                fill: false
                            },
                            {
                                label: 'Mid-sized burn (500-1500)',
                                data: [18, 128, 144, 39, 14],
                                borderColor: chartBorderColors.amber,
                                backgroundColor: chartColors.amber,
                                tension: 0.4,
                                fill: false
                            },
                            {
                                label: 'Large burn (1500+)',
                                data: [4, 35, 125, 78, 48],
                                borderColor: chartBorderColors.rose,
                                backgroundColor: chartColors.rose,
                                tension: 0.4,
                                fill: false
                            }
                        ]
                    },
                    options: {
                        ...defaultChartOptions,
                        plugins: {
                            ...defaultChartOptions.plugins,
                            legend: { display: true, position: 'bottom' },
                            datalabels: { display: false }
                        }
                    }
                });

                allCharts.timingChart = new Chart(document.getElementById('timingChart'), {
                    type: 'bar',
                    data: {
                        labels: ['Labour Day (Oct)', 'All work', 'Easter', 'Australia Day (Jan)', "King's B'day (Jun)"],
                        datasets: [{
                            label: 'Preference',
                            data: [191, 164, 158, 129, 112],
                            backgroundColor: [chartColors.rose, chartColors.teal, chartColors.amber, chartColors.sky, chartColors.stone],
                            borderColor: Object.values(chartBorderColors),
                            borderWidth: 1
                        }]
                    },
                    options: { ...defaultChartOptions, indexAxis: 'y', plugins: { datalabels: { anchor: 'end', align: 'start', color: '#333' } } }
                });

                allCharts.communityConnectionChart = new Chart(document.getElementById('communityConnectionChart'), {
                    type: 'bar',
                    data: {
                        labels: [''],
                        datasets: [
                            { label: 'Very Connected', data: [18], backgroundColor: chartColors.green },
                            { label: 'Somewhat Connected', data: [36], backgroundColor: chartColors.lightGreen },
                            { label: 'Neutral', data: [15], backgroundColor: chartColors.neutral },
                            { label: 'Somewhat Disconnected', data: [21], backgroundColor: chartColors.lightRed },
                            { label: 'Very Disconnected', data: [10], backgroundColor: chartColors.red }
                        ]
                    },
                    options: {
                        ...defaultChartOptions,
                        indexAxis: 'y',
                        scales: {
                            x: { stacked: true, max: 100, ticks: { callback: (value) => value + '%' } },
                            y: { stacked: true, display: false }
                        },
                        plugins: {
                            ...defaultChartOptions.plugins,
                            legend: { display: true, position: 'bottom' },
                            tooltip: { callbacks: { label: (context) => `${context.dataset.label}: ${context.raw}%` } },
                            datalabels: {
                                color: '#fff',
                                formatter: (value) => value > 5 ? value + '%' : ''
                            }
                        }
                    }
                });

                allCharts.artBurnsImportanceChart = new Chart(document.getElementById('artBurnsImportanceChart'), {
                    type: 'bar',
                    data: {
                        labels: [''],
                        datasets: [
                            { label: 'Essential, non-negotiable', data: [17], backgroundColor: chartColors.rose },
                            { label: 'Very important', data: [34], backgroundColor: chartColors.amber },
                            { label: 'Nice but not essential', data: [42], backgroundColor: chartColors.teal },
                            { label: 'Not important', data: [6], backgroundColor: chartColors.stone },
                            { label: 'No opinion', data: [2], backgroundColor: chartColors.neutral }
                        ]
                    },
                    options: {
                        ...defaultChartOptions,
                        indexAxis: 'y',
                        scales: {
                            x: { stacked: true, max: 100, ticks: { callback: (value) => value + '%' } },
                            y: { stacked: true, display: false }
                        },
                        plugins: {
                            ...defaultChartOptions.plugins,
                            legend: { display: true, position: 'bottom' },
                            tooltip: { callbacks: { label: (context) => `${context.dataset.label}: ${context.raw}%` } },
                            datalabels: {
                                color: '#fff',
                                formatter: (value) => value > 5 ? value + '%' : ''
                            }
                        }
                    }
                });

                allCharts.fireSeasonTradeoffsChart = new Chart(document.getElementById('fireSeasonTradeoffsChart'), {
                    type: 'doughnut',
                    data: {
                        labels: ['Warmer months without burns', 'Colder months with burns', 'No preference'],
                        datasets: [{
                            data: [44, 23, 34],
                            backgroundColor: [chartColors.amber, chartColors.rose, chartColors.teal],
                            borderColor: '#F8F7F4',
                            borderWidth: 4,
                            hoverOffset: 4
                        }]
                    },
                    options: { ...defaultChartOptions, plugins: { ...defaultChartOptions.plugins, legend: { display: true, position: 'bottom' } } }
                });

                allCharts.publicHolidaysChart = new Chart(document.getElementById('publicHolidaysChart'), {
                    type: 'bar',
                    data: {
                        labels: [''],
                        datasets: [
                            { label: 'Very Important', data: [8], backgroundColor: chartColors.rose },
                            { label: 'Somewhat Important', data: [30], backgroundColor: chartColors.amber },
                            { label: 'Neutral', data: [27], backgroundColor: chartColors.neutral },
                            { label: 'Somewhat Unimportant', data: [8], backgroundColor: chartColors.stone },
                            { label: 'Not Important', data: [26], backgroundColor: chartColors.sky }
                        ]
                    },
                    options: {
                        ...defaultChartOptions,
                        indexAxis: 'y',
                        scales: {
                            x: { stacked: true, max: 100, ticks: { callback: (value) => value + '%' } },
                            y: { stacked: true, display: false }
                        },
                        plugins: {
                            ...defaultChartOptions.plugins,
                            legend: { display: true, position: 'bottom' },
                            tooltip: { callbacks: { label: (context) => `${context.dataset.label}: ${context.raw}%` } },
                            datalabels: {
                                color: '#fff',
                                formatter: (value) => value > 5 ? value + '%' : ''
                            }
                        }
                    }
                });
            }
            
            const personas = [
                { 
                    name: 'Veteran Community Architect', 
                    icon: '&#128736;', 
                    color: 'amber',
                    age: '35-54 years',
                    percentage: '23% of community',
                    characteristics: [
                        '5+ events experience',
                        'Multi-skilled contributors',
                        'Strong institutional knowledge',
                        'Neurodivergent representation'
                    ],
                    motivations: [
                        '"Community, stepping out of the matrix, the ethos"',
                        '"Living as an example of how you want to be in life"'
                    ],
                    needs: [
                        'Sustainable volunteer structures (max 4-hour shifts)',
                        'Clear documentation & processes',
                        'Recognition for ongoing contributions',
                        'Succession planning systems'
                    ],
                    contributions: [
                        'Year-round community involvement',
                        'Department heads & coordinators',
                        'Mentorship & training',
                        'Institutional memory'
                    ]
                },
                { 
                    name: 'Creative Contributor', 
                    icon: '&#127912;', 
                    color: 'rose',
                    age: '25-44 years',
                    percentage: '32% of community',
                    characteristics: [
                        '2-4 events experience',
                        'Art & music focused',
                        'Project-based involvement',
                        'Values gift economy principles'
                    ],
                    motivations: [
                        '"The artistic and marvellous effort that people gift for the community"',
                        '"Being able to be myself and drop the mask"'
                    ],
                    needs: [
                        'Funding & resource support',
                        'Workspace access & tool sharing',
                        'Collaborative project coordination',
                        'Recognition of artistic contributions'
                    ],
                    contributions: [
                        'Art installations & creative projects',
                        'Skill-sharing workshops',
                        'Theme camp artistic coordination',
                        'Cultural programming'
                    ]
                },
                { 
                    name: 'Community Connector', 
                    icon: '&#129309;', 
                    color: 'teal',
                    age: '25-44 years',
                    percentage: '28% of community',
                    characteristics: [
                        'Often newer participants',
                        'Seeking belonging & growth',
                        'Strong interpersonal skills',
                        'Sensitive to exclusion'
                    ],
                    motivations: [
                        '"Authentic connection and belonging"',
                        '"Personal transformation and growth"'
                    ],
                    needs: [
                        'Safe, welcoming spaces',
                        'Protection from exclusionary dynamics',
                        'Clear community integration pathways',
                        'Neurodivergent support'
                    ],
                    contributions: [
                        'Greeter & Ranger roles',
                        'Social event organisation',
                        'Newcomer support activities',
                        'Inclusion advocacy'
                    ]
                },
                 { 
                    name: 'Parent Leaders', 
                    icon: '&#128106;&#8205;&#128105;&#8205;&#128103;', 
                    color: 'sky',
                    age: '35-54 years',
                    percentage: '15% of community',
                    characteristics: [
                        'Balancing Burner identity with family',
                        'Safety & accessibility focused',
                        'Intergenerational perspective',
                        'Values-based parenting'
                    ],
                    motivations: [
                        '"Intergenerational community experiences"',
                        '"Values-based environment for children"'
                    ],
                    needs: [
                        'Family-friendly programming & facilities',
                        'Childcare options & family areas',
                        'Enhanced safety considerations',
                        'Community that welcomes children'
                    ],
                    contributions: [
                        'Family programming coordination',
                        'Child-friendly activity development',
                        'Safety & welfare roles',
                        'Community education about inclusion'
                    ]
                },
                { 
                    name: 'Engaged Pragmatist', 
                    icon: '&#9878;', 
                    color: 'stone',
                    age: '25-54 years',
                    percentage: '22% of community',
                    characteristics: [
                        'Enjoys Burns with healthy boundaries',
                        'Professional skills without over-commitment',
                        'Values work-life balance',
                        'Efficient participation model'
                    ],
                    motivations: [
                        '"Meaningful contribution without total lifestyle commitment"',
                        '"Balanced engagement with clear boundaries"'
                    ],
                    needs: [
                        'Defined, time-limited commitments',
                        'Transparent communication',
                        'Professional event management',
                        'Respect for time & energy limits'
                    ],
                    contributions: [
                        'Specific, well-defined volunteer roles',
                        'Logistical & operational support',
                        'Quality control & efficiency',
                        'Professional standards advocacy'
                    ]
                }
            ];
            
            const personasContainer = document.getElementById('personas-container');
            const modal = document.getElementById('persona-modal');
            const modalBody = document.getElementById('modal-body');
            const closeModalButton = document.getElementById('close-modal-button');

            if (personasContainer) {
                personas.forEach(p => {
                    const card = document.createElement('div');
                    card.className = `persona-card cursor-pointer bg-white p-6 rounded-lg shadow-sm border-t-4 border-${p.color}-500 flex flex-col`;
                    card.innerHTML = `
                        <div class="text-4xl">${p.icon}</div>
                        <h4 class="mt-4 text-lg font-semibold text-stone-900">${p.name}</h4>
                        <p class="text-sm text-stone-500">${p.age} | ${p.percentage}</p>
                        <p class="mt-2 text-sm text-stone-600 flex-grow">${p.characteristics.slice(0,2).join(', ')}...</p>
                    `;
                    card.addEventListener('click', () => openPersonaModal(p));
                    personasContainer.appendChild(card);
                });
            }

            function openPersonaModal(persona) {
                modalBody.innerHTML = `
                    <div class="flex items-start space-x-4">
                        <div class="text-5xl">${persona.icon}</div>
                        <div>
                            <h2 class="text-2xl font-bold text-stone-900">${persona.name}</h2>
                            <p class="text-sm text-stone-500">${persona.age} | ${persona.percentage}</p>
                        </div>
                    </div>
                    <div class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-6 text-sm">
                        <div>
                            <h3 class="font-semibold text-stone-800 border-b pb-1 mb-2">Key Characteristics</h3>
                            <ul class="list-disc list-inside space-y-1 text-stone-600">${persona.characteristics.map(item => `<li>${item}</li>`).join('')}</ul>
                        </div>
                        <div>
                            <h3 class="font-semibold text-stone-800 border-b pb-1 mb-2">Core Motivations</h3>
                            <ul class="list-disc list-inside space-y-1 text-stone-600">${persona.motivations.map(item => `<li>${item}</li>`).join('')}</ul>
                        </div>
                        <div>
                            <h3 class="font-semibold text-stone-800 border-b pb-1 mb-2">Primary Needs</h3>
                            <ul class="list-disc list-inside space-y-1 text-stone-600">${persona.needs.map(item => `<li>${item}</li>`).join('')}</ul>
                        </div>
                        <div>
                            <h3 class="font-semibold text-stone-800 border-b pb-1 mb-2">Contribution Style</h3>
                            <ul class="list-disc list-inside space-y-1 text-stone-600">${persona.contributions.map(item => `<li>${item}</li>`).join('')}</ul>
                        </div>
                    </div>
                `;
                modal.classList.remove('hidden');
                setTimeout(() => {
                    modal.classList.remove('opacity-0');
                    modal.querySelector('.modal-content').classList.remove('scale-95', 'opacity-0');
                }, 10);
            }

            function closePersonaModal() {
                modal.querySelector('.modal-content').classList.add('scale-95', 'opacity-0');
                modal.classList.add('opacity-0');
                setTimeout(() => {
                    modal.classList.add('hidden');
                }, 300);
            }

            closeModalButton.addEventListener('click', closePersonaModal);
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    closePersonaModal();
                }
            });

            // Mobile menu toggle
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            
            mobileMenuButton.addEventListener('click', function() {
                mobileMenu.classList.toggle('hidden');
            });

            // Close mobile menu when clicking a link
            const mobileNavLinks = mobileMenu.querySelectorAll('a');
            mobileNavLinks.forEach(link => {
                link.addEventListener('click', () => {
                    mobileMenu.classList.add('hidden');
                });
            });
            
            const viewButtons = document.querySelectorAll('.view-nav-button');
            const views = document.querySelectorAll('.view-content');
            const navLinks = document.querySelectorAll('.nav-link');
            const sections = document.querySelectorAll('main section');

            function switchView(viewName) {
                views.forEach(view => {
                    if (view.id === `${viewName}-view`) {
                        view.classList.remove('hidden');
                    } else {
                        view.classList.add('hidden');
                    }
                });
                viewButtons.forEach(button => {
                    if (button.dataset.view === viewName) {
                        button.classList.add('active');
                    } else {
                        button.classList.remove('active');
                    }
                });
                window.scrollTo(0, 0);
            }

            viewButtons.forEach(button => {
                button.addEventListener('click', () => {
                    switchView(button.dataset.view);
                });
            });

            // Active nav link scrolling
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        navLinks.forEach(link => {
                            link.classList.toggle('active', link.getAttribute('href').substring(1) === entry.target.id);
                        });
                    }
                });
            }, { rootMargin: "-50% 0px -50% 0px" });

            sections.forEach(section => {
                observer.observe(section);
            });

            createCharts();
        }
        
        // Initialize the interactive map
        function initializeMap() {
            if (typeof L === 'undefined') {
                console.error('Leaflet is not loaded');
                return;
            }
            
            const mapContainer = document.getElementById('interactive-map');
            if (!mapContainer) {
                console.error('Map container not found');
                return;
            }
            
            // Initialize the map centered on Australia
            const map = L.map('interactive-map').setView([-25.2744, 133.7751], 5);

            // Add satellite tile layer
            L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
                attribution: 'Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community'
            }).addTo(map);

            // Add a subtle street overlay for context
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: ' OpenStreetMap contributors',
                opacity: 0.3
            }).addTo(map);

            // Load and process the LGA data
            fetch('lga_centers.json')
                .then(response => response.json())
                .then(data => {
                    const heatmapData = [];
                    const markers = [];
                    
                    // Create separate layer groups
                    const heatmapGroup = L.layerGroup();
                    const markerGroup = L.layerGroup();
                    
                    // Process each LGA (data is now an object with LGA keys)
                    console.log('Processing LGAs, total:', Object.keys(data).length);
                    Object.keys(data).forEach(lgaName => {
                        const lgaData = data[lgaName];
                        const centerLat = lgaData.center_latitude;
                        const centerLng = lgaData.center_longitude;
                        const locations = lgaData.all_coordinates;
                        const numPostcodes = lgaData.num_postcodes;
                        
                        console.log(`Processing LGA ${lgaName}:`, {
                            hasCenter: !!(centerLat && centerLng),
                            centerLat: centerLat,
                            centerLng: centerLng,
                            postcodesCount: numPostcodes
                        });
                        
                        if (centerLat && centerLng) {
                            // Add heatmap point with intensity based on number of respondents
                            const respondentCount = lgaData.respondent_count || numPostcodes;
                            const intensity = Math.min(respondentCount * 2, 15); // Higher cap for respondent density
                            const heatmapPoint = {
                                lat: centerLat,
                                lng: centerLng,
                                value: intensity
                            };
                            heatmapData.push(heatmapPoint);
                            console.log(`Added heatmap point for LGA ${lgaName}: ${intensity} intensity (${respondentCount} respondents) at ${centerLat}, ${centerLng}`);
                            
                            // Create marker for each LGA
                            const marker = L.circleMarker([centerLat, centerLng], {
                                radius: Math.min(respondentCount * 4 + 8, 35), // Larger radius based on respondents
                                fillColor: getColorByCount(respondentCount),
                                color: '#fff',
                                weight: 2,
                                opacity: 1,
                                fillOpacity: 0.7
                            });
                            
                            // Add popup with LGA information
                            marker.bindPopup(`
                                <div style="min-width: 250px;">
                                    <h4 style="margin: 0 0 8px 0; color: #333;">LGA: ${lgaName}</h4>
                                    <p style="margin: 0 0 8px 0; color: #666;">
                                        <strong>${respondentCount}</strong> respondents in this area
                                    </p>
                                    <p style="margin: 0 0 4px 0; color: #666;">
                                        <strong>${numPostcodes}</strong> postcodes covered
                                    </p>
                                    <p style="margin: 0 0 4px 0; color: #666;">
                                        <strong>State:</strong> ${lgaData.state}
                                    </p>
                                    <p style="margin: 0; font-size: 0.9em; color: #888;">
                                        Center: ${centerLat.toFixed(4)}, ${centerLng.toFixed(4)}
                                    </p>
                                </div>
                            `);
                            
                            // Track map marker clicks
                            marker.on('click', () => {
                                trackMapInteraction('marker_click', {
                                    lga_name: lgaName,
                                    respondent_count: respondentCount,
                                    state: lgaData.state
                                });
                            });
                            
                            markers.push(marker);
                            marker.addTo(markerGroup);
                        }
                    });
                    
                    // Add heatmap layer using circle markers instead
                    console.log('Adding heatmap data:', heatmapData.length, 'points');
                    console.log('Sample heatmap data:', heatmapData.slice(0, 3));
                    heatmapData.forEach(point => {
                        const intensity = point.value / 10; // Normalize to 0-1
                        const radius = Math.max(8, Math.min(30, point.value * 4));
                        const color = getHeatmapColor(intensity);
                        
                        const heatmapMarker = L.circleMarker([point.lat, point.lng], {
                            radius: radius,
                            fillColor: color,
                            color: '#fff',
                            weight: 2,
                            opacity: 1,
                            fillOpacity: 0.7
                        });
                        
                        // Add popup for heatmap points
                        heatmapMarker.bindPopup(`
                            <div style="min-width: 150px;">
                                <h4 style="margin: 0 0 8px 0; color: #333;">Heatmap Point</h4>
                                <p style="margin: 0; color: #666;">
                                    <strong>Intensity:</strong> ${point.value.toFixed(1)}<br>
                                    <strong>Location:</strong> ${point.lat.toFixed(4)}, ${point.lng.toFixed(4)}
                                </p>
                            </div>
                        `);
                        
                        heatmapMarker.addTo(heatmapGroup);
                    });
                    
                    // Calculate weighted center of all respondents
                    let totalWeightedLat = 0;
                    let totalWeightedLng = 0;
                    let totalRespondents = 0;
                    
                    Object.keys(data).forEach(lgaName => {
                        const lgaData = data[lgaName];
                        const respondentCount = lgaData.respondent_count || 0;
                        const centerLat = lgaData.center_latitude;
                        const centerLng = lgaData.center_longitude;
                        
                        if (centerLat && centerLng && respondentCount > 0) {
                            totalWeightedLat += centerLat * respondentCount;
                            totalWeightedLng += centerLng * respondentCount;
                            totalRespondents += respondentCount;
                        }
                    });
                    
                    const weightedCenterLat = totalWeightedLat / totalRespondents;
                    const weightedCenterLng = totalWeightedLng / totalRespondents;
                    
                    console.log(`Weighted center of all ${totalRespondents} respondents: (${weightedCenterLat.toFixed(4)}, ${weightedCenterLng.toFixed(4)})`);
                    
                    // Add weighted center marker with X
                    const centerMarker = L.marker([weightedCenterLat, weightedCenterLng], {
                        icon: L.divIcon({
                            className: 'weighted-center-marker',
                            html: '<div style="background: #ff0000; color: white; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 18px; border: 3px solid white; box-shadow: 0 2px 4px rgba(0,0,0,0.3);">X</div>',
                            iconSize: [30, 30],
                            iconAnchor: [15, 15]
                        })
                    });
                    
                    centerMarker.bindPopup(`
                        <div style="min-width: 250px;">
                            <h4 style="margin: 0 0 8px 0; color: #333;">Community Geographic Center</h4>
                            <p style="margin: 0 0 8px 0; color: #666;">
                                <strong>Weighted center</strong> of all ${totalRespondents} survey respondents
                            </p>
                            <p style="margin: 0 0 4px 0; color: #666;">
                                <strong>Coordinates:</strong> ${weightedCenterLat.toFixed(4)}, ${weightedCenterLng.toFixed(4)}
                            </p>
                            <p style="margin: 0; font-size: 0.9em; color: #888;">
                                This point represents the geographic center of your community, weighted by the number of respondents in each postcode area.
                            </p>
                        </div>
                    `);
                    
                    // Track center marker clicks
                    centerMarker.on('click', () => {
                        trackMapInteraction('center_marker_click', {
                            total_respondents: totalRespondents,
                            weighted_center_lat: weightedCenterLat.toFixed(4),
                            weighted_center_lng: weightedCenterLng.toFixed(4)
                        });
                    });
                    
                    centerMarker.addTo(map);
                    
                    // Add layer groups to map
                    heatmapGroup.addTo(map);
                    markerGroup.addTo(map);
                    
                    // Add legend
                    const legend = L.control({position: 'bottomright'});
                    legend.onAdd = function() {
                        const div = L.DomUtil.create('div', 'legend');
                        div.innerHTML = `
                            <h4 style="margin: 0 0 8px 0;">Respondent Density by LGA</h4>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #00ff00;"></div>
                                <span>Low (1 respondent)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #ffff00;"></div>
                                <span>Medium (2-3 respondents)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #ff8000;"></div>
                                <span>High (4-6 respondents)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #ff4000;"></div>
                                <span>Very High (7-10 respondents)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: #ff0000;"></div>
                                <span>Extreme (10+ respondents)</span>
                            </div>
                            <hr style="margin: 8px 0; border: none; border-top: 1px solid #ccc;">
                            <div class="legend-item">
                                <div style="width: 20px; height: 20px; margin-right: 8px; background: #ff0000; color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 12px; border: 2px solid white;">X</div>
                                <span>Community Center (${totalRespondents} respondents)</span>
                            </div>
                        `;
                        return div;
                    };
                    legend.addTo(map);
                    
                    console.log(`Loaded ${Object.keys(data).length} LGAs with ${markers.length} markers`);
                })
                .catch(error => {
                    console.error('Error loading postcode data:', error);
                    // Add a fallback message
                    mapContainer.innerHTML = `
                        <div style="display: flex; align-items: center; justify-content: center; height: 100%; background: #f8f9fa; border-radius: 8px;">
                            <div style="text-align: center; color: #666;">
                                <h4>Map Loading...</h4>
                                <p>If the map doesn't load, please ensure postcode_centers.json is available.</p>
                            </div>
                        </div>
                    `;
                });
            
            function getColorByCount(count) {
                // Color coding based on respondent count for density visualization
                if (count <= 1) return '#00ff00';      // Green - Low density
                if (count <= 3) return '#ffff00';      // Yellow - Medium-low density
                if (count <= 6) return '#ff8000';      // Orange - Medium-high density
                if (count <= 10) return '#ff4000';     // Red-orange - High density
                return '#ff0000';                       // Red - Very high density
            }
            
            function getHeatmapColor(intensity) {
                // Create a heatmap color gradient with more vibrant colors
                if (intensity <= 0.2) return '#00ff00';      // Bright Green
                if (intensity <= 0.4) return '#ffff00';      // Bright Yellow
                if (intensity <= 0.6) return '#ff8000';      // Orange
                if (intensity <= 0.8) return '#ff4000';      // Red-orange
                return '#ff0000';                             // Bright Red
            }
        }
        
        // Analytics tracking functions
        function trackEvent(eventName, parameters = {}) {
            if (typeof gtag !== 'undefined') {
                gtag('event', eventName, parameters);
            }
        }
        
        function trackSectionView(sectionName) {
            trackEvent('section_view', {
                section_name: sectionName,
                event_category: 'engagement',
                event_label: sectionName
            });
        }
        
        function trackChartInteraction(chartName, interactionType) {
            trackEvent('chart_interaction', {
                chart_name: chartName,
                interaction_type: interactionType,
                event_category: 'data_visualization',
                event_label: `${chartName}_${interactionType}`
            });
        }
        
        function trackPersonaView(personaName) {
            trackEvent('persona_view', {
                persona_name: personaName,
                event_category: 'engagement',
                event_label: personaName
            });
        }
        
        function trackMapInteraction(interactionType, details = {}) {
            trackEvent('map_interaction', {
                interaction_type: interactionType,
                event_category: 'geographic_data',
                event_label: interactionType,
                ...details
            });
        }
        
        function trackScrollDepth() {
            let maxScroll = 0;
            let scrollTracking = false;
            
            window.addEventListener('scroll', () => {
                if (!scrollTracking) {
                    scrollTracking = true;
                    setTimeout(() => {
                        const scrollPercent = Math.round((window.scrollY / (document.body.scrollHeight - window.innerHeight)) * 100);
                        if (scrollPercent > maxScroll) {
                            maxScroll = scrollPercent;
                            
                            // Track at 25%, 50%, 75%, and 100%
                            if (scrollPercent >= 25 && maxScroll < 50) {
                                trackEvent('scroll_depth', { depth: '25%', event_category: 'engagement' });
                            } else if (scrollPercent >= 50 && maxScroll < 75) {
                                trackEvent('scroll_depth', { depth: '50%', event_category: 'engagement' });
                            } else if (scrollPercent >= 75 && maxScroll < 100) {
                                trackEvent('scroll_depth', { depth: '75%', event_category: 'engagement' });
                            } else if (scrollPercent >= 100) {
                                trackEvent('scroll_depth', { depth: '100%', event_category: 'engagement' });
                            }
                        }
                        scrollTracking = false;
                    }, 100);
                }
            });
        }
        
        function trackTimeOnPage() {
            let startTime = Date.now();
            let timeTracking = false;
            
            window.addEventListener('beforeunload', () => {
                const timeSpent = Math.round((Date.now() - startTime) / 1000);
                trackEvent('time_on_page', {
                    time_spent_seconds: timeSpent,
                    event_category: 'engagement'
                });
            });
        }
        
        function trackNavigationClicks() {
            const navLinks = document.querySelectorAll('.nav-link');
            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    const sectionName = e.target.getAttribute('href').substring(1);
                    trackEvent('navigation_click', {
                        section_name: sectionName,
                        event_category: 'navigation',
                        event_label: sectionName
                    });
                });
            });
        }
        
        function trackMobileMenuUsage() {
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            if (mobileMenuButton) {
                mobileMenuButton.addEventListener('click', () => {
                    trackEvent('mobile_menu_toggle', {
                        event_category: 'navigation',
                        event_label: 'mobile_menu'
                    });
                });
            }
        }
        
        function trackModalInteractions() {
            const personaCards = document.querySelectorAll('.persona-card');
            personaCards.forEach(card => {
                card.addEventListener('click', () => {
                    const personaName = card.querySelector('h4').textContent;
                    trackPersonaView(personaName);
                });
            });
            
            const closeModalButton = document.getElementById('close-modal-button');
            if (closeModalButton) {
                closeModalButton.addEventListener('click', () => {
                    trackEvent('modal_close', {
                        event_category: 'interaction',
                        event_label: 'persona_modal'
                    });
                });
            }
        }
        
        function trackChartHovers() {
            // Track when users hover over charts
            const chartContainers = document.querySelectorAll('.chart-container, .chart-container-small, .chart-container-tall, .chart-container-large');
            chartContainers.forEach(container => {
                const canvas = container.querySelector('canvas');
                if (canvas) {
                    const chartName = canvas.id.replace('Chart', '');
                    container.addEventListener('mouseenter', () => {
                        trackChartInteraction(chartName, 'hover');
                    });
                }
            });
        }
        
        function trackSectionVisibility() {
            const sections = document.querySelectorAll('section[id]');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const sectionName = entry.target.id;
                        trackSectionView(sectionName);
                    }
                });
            }, { threshold: 0.5 });
            
            sections.forEach(section => {
                observer.observe(section);
            });
        }
        
        // Wait for DOM and scripts to be ready
        document.addEventListener('DOMContentLoaded', function () {
            // Initialize analytics tracking
            trackScrollDepth();
            trackTimeOnPage();
            trackNavigationClicks();
            trackMobileMenuUsage();
            trackModalInteractions();
            trackChartHovers();
            trackSectionVisibility();
            
            // Track initial page load
            trackEvent('page_view', {
                page_title: 'NSW Burns Community Survey Results',
                event_category: 'page_interaction'
            });
            
            // Try to initialize immediately
            if (typeof Chart !== 'undefined' && typeof ChartDataLabels !== 'undefined') {
                initializeCharts();
            } else {
                // If not ready, wait a bit and try again
                setTimeout(() => {
                    if (typeof Chart !== 'undefined' && typeof ChartDataLabels !== 'undefined') {
                        initializeCharts();
                    } else {
                        console.error('Chart.js or ChartDataLabels failed to load');
                    }
                }, 500);
            }
            
            // Initialize map after a delay to ensure Leaflet is loaded
            setTimeout(() => {
                if (typeof L !== 'undefined') {
                    initializeMap();
                } else {
                    console.error('Leaflet failed to load');
                }
            }, 1000);
        });
    </script>
</body>
</html>
 